{% extends 'main.html' %} {% block content %}
<script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
<link
  rel="stylesheet"
  href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css"
/>
<link
  rel="stylesheet"
  href="https://fonts.googleapis.com/css?family=Fjalla+One&amp;display=swap"
/>
<link
  rel="stylesheet"
  href="https://fonts.googleapis.com/css?family=Londrina+Solid&amp;display=swap"
/>
{% load static %}
<link
  rel="stylesheet"
  href="{% static 'css/-Login-form-Page-BS4--Login-form-Page-BS4.css' %}"
/>
{% load static %}
<link
  rel="stylesheet"
  href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.5.2/animate.min.css"
/>
{% load static %}
<link rel="stylesheet" href="{% static 'css/styles.css' %" />

<h1
  style="
    margin-left: 10vw;
    margin-right: 34px;
    margin-bottom: 0px;
    margin-top: 49px;
    padding-left: 30px;
    padding-right: 30px;
    font-weight: 700;
  "
>
  Hello, {{ user.username }}!
</h1>
<div class="container" style="margin-top: 0px; margin-bottom: 107px">
  <div
    class="row gx-5"
    style="
      padding-top: 14px;
      padding-bottom: 14px;
      padding-left: 62px;
      padding-right: 62px;
    "
  >
    <div
      class="col"
      style="
        padding-top: 37px;
        padding-bottom: 37px;
        margin-right: 31px;
        padding-left: 39px;
        padding-right: 39px;
      "
    >
      {% load static %}
      <img src="{% static 'images/tasks.gif' %}" style="width: 16vw" />
      <h1>Tasks</h1>
      <button
        class="btn btn-primary"
        type="button"
        data-task
        style="margin-top: 14px; margin-bottom: 14px"
      >
        Add Task
      </button>
      <form
        method="post"
        action="dashboard"
        style="display: none"
        data-task-form
      >
        {% csrf_token %}
        <input
          class="form-control"
          type="text"
          name="taskname"
          style="margin-top: 12px; margin-bottom: 12px"
        /><input
          class="form-control"
          type="date"
          name="time"
          style="margin-top: 21px; margin-bottom: 21px"
        /><input
          class="btn btn-primary"
          type="submit"
          value="Submit"
          style="margin-top: 11px; margin-bottom: 11px"
        />
      </form>
      <div class="form-check" style="margin-top: 13px; margin-bottom: 13px">
        <h2 style="margin-bottom: 30px">Your Tasks</h2>
        <form method="post" action="dashboard">
          {% csrf_token %} {% for task in tasks %}
          <input
            class="form-check-input"
            type="checkbox"
            name="task_checkbox"
            value="{{task.id}}"
            id="formCheck-1"
          /><label class="form-check-label" for="formCheck-1"
            >{{task.name}} ({{task.time|date:'d-m-y'}})</label
          ><br />
          {% endfor %}
          <input
            class="btn btn-primary"
            type="submit"
            name="update_task_status"
            value="Update Task status"
            style="margin-top: 35px; margin-bottom: 7px"
          />
        </form>
      </div>
    </div>
    <div
      class="col"
      style="
        padding-top: 33px;
        padding-bottom: 33px;
        padding-left: 40px;
        padding-right: 40px;
      "
    >
      {% load static %}
      <img src="{% static 'images/goals.gif' %}" style="width: 16vw" />
      <h1 style="margin-bottom: 10px">Goals</h1>
      <button
        class="btn btn-primary"
        type="button"
        data-goal
        style="margin-top: 21px; margin-bottom: 21px"
      >
        Add Goal
      </button>
      <form
        method="post"
        action="dashboard"
        data-goal-form
        style="display: none"
      >
        {% csrf_token %}
        <input
          class="form-control"
          type="text"
          name="goalname"
          style="margin-top: 15px; margin-bottom: 15px"
        /><input
          class="btn btn-primary"
          type="submit"
          value="Submit"
          style="margin-top: 6px; margin-bottom: 6px"
        />
      </form>
      <div class="form-check" style="margin-top: 16px; margin-bottom: 16px">
        <h2 style="margin-bottom: 30px">Your Goals</h2>
        <form method="post" action="dashboard">
          {% csrf_token %} {% for goal in goals %}
          <input
            class="form-check-input"
            type="checkbox"
            name="goal_checkbox"
            value="{{goal.id}}"
            id="formCheck-2"
          /><label class="form-check-label" for="formCheck-2"
            >{{goal.name}}</label
          ><br />
          {% endfor %}
          <input
            class="btn btn-primary"
            type="submit"
            name="update_goal_status"
            value="Update Goal status"
            style="margin-top: 35px; margin-bottom: 7px"
          />
        </form>
      </div>
    </div>
  </div>
</div>
<div class="container">
  <div class="row">
    <div class="col">
      <h1 style="padding-top: 10px; padding-bottom: 10px">
        Your sleep across the week...
      </h1>
      <div id="sleep" style="width: 100%; max-width: 700px"></div>
    </div>
    <div class="col">
      <h1 style="padding-top: 10px; padding-bottom: 10px">
        Your work across the week...
      </h1>
      <div id="study" style="width: 100%; max-width: 700px"></div>
    </div>
  </div>
  <div
    class="row text-center"
    style="
      padding-top: 31px;
      padding-bottom: 31px;
      padding-left: 411px;
      padding-right: 411px;
    "
  >
    <div class="col">
      <form method="post" action="dashboard">
        {% csrf_token %}
        <p>How long did you sleep today?</p>
        <input class="form-control" type="number" name="sleep" />
        <p>How long did you work today?</p>
        <input class="form-control" type="number" name="study" /><input
          class="btn btn-primary"
          type="submit"
          style="margin-top: 19px; margin-bottom: 19px"
        />
      </form>
    </div>
  </div>
</div>
<script type="text/javascript">
  let sleep = {{ sleep }};
  let date = {{ date }};
  let study = {{ study }};
  console.log(sleep)
  console.log(date)

  let data1 = [{
      x: date,
      y: sleep,
      mode: "lines",
      type: "scatter"
  }];
  let layout1 = {
      xaxis: {range: [date[0], date[-1]], title: "Date"},
      yaxis: {range: [0, 10], title: "Hours of sleep"},
      title: "Sleep"
  };
  Plotly.newPlot("sleep", data1, layout1);
  let data2 = [{
      x: date,
      y: study,
      mode: "lines",
      type: "scatter"
  }];
  let layout2 = {
      xaxis: {range: [date[0], date[-1]], title: "Date"},
      yaxis: {range: [0, 10], title: "Hours of study"},
      title: "Study"
  };
  Plotly.newPlot("study", data2, layout2);

  //Toggle task form
  document.querySelector('[data-task]').addEventListener('click', function(){
    console.log('Click!');
    if (document.querySelector('[data-task-form]').style.display=='none')
    document.querySelector('[data-task-form]').style.display='block';
    else document.querySelector('[data-task-form]').style.display='none'
  })
    //Toggle goal form
    document.querySelector('[data-goal]').addEventListener('click', function(){
      console.log('Click!');
      if (document.querySelector('[data-goal-form]').style.display=='none')
      document.querySelector('[data-goal-form]').style.display='block';
      else document.querySelector('[data-goal-form]').style.display='none'
  })
</script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
{% load static %}
<script src="{% static 'bs-init.js' %}"></script>
{% load static %}
<script src="{% static 'navScroll.js' %}"></script>
{% endblock %}
